{"version":3,"file":"IndexedDBModel.js","sourceRoot":"","sources":["../../../../../../front_end/panels/application/IndexedDBModel.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright (C) 2012 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Common from '../../core/common/common.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport type * as ProtocolProxyApi from '../../generated/protocol-proxy-api.js';\n\nexport class IndexedDBModel extends SDK.SDKModel.SDKModel<EventTypes> implements ProtocolProxyApi.StorageDispatcher {\n  private readonly securityOriginManager: SDK.SecurityOriginManager.SecurityOriginManager|null;\n  private readonly storageKeyManager: SDK.StorageKeyManager.StorageKeyManager|null;\n  private readonly indexedDBAgent: ProtocolProxyApi.IndexedDBApi;\n  private readonly storageAgent: ProtocolProxyApi.StorageApi;\n  private readonly databasesInternal: Map<DatabaseId, Database>;\n  private databaseNamesBySecurityOrigin: Map<string, Set<string>>;\n  private databaseNamesByStorageKey: Map<string, Set<string>>;\n  private readonly originsUpdated: Set<string>;\n  private readonly updatedStorageKeys: Set<string>;\n  private readonly throttler: Common.Throttler.Throttler;\n  private enabled?: boolean;\n\n  constructor(target: SDK.Target.Target) {\n    super(target);\n    target.registerStorageDispatcher(this);\n    this.securityOriginManager = target.model(SDK.SecurityOriginManager.SecurityOriginManager);\n    this.storageKeyManager = target.model(SDK.StorageKeyManager.StorageKeyManager);\n    this.indexedDBAgent = target.indexedDBAgent();\n    this.storageAgent = target.storageAgent();\n\n    this.databasesInternal = new Map();\n    this.databaseNamesBySecurityOrigin = new Map();\n    this.databaseNamesByStorageKey = new Map();\n\n    this.originsUpdated = new Set();\n    this.updatedStorageKeys = new Set();\n    this.throttler = new Common.Throttler.Throttler(1000);\n  }\n\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration)\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  static keyFromIDBKey(idbKey: any): Protocol.IndexedDB.Key|undefined {\n    if (typeof (idbKey) === 'undefined' || idbKey === null) {\n      return undefined;\n    }\n\n    let key: Protocol.IndexedDB.Key;\n    switch (typeof (idbKey)) {\n      case 'number':\n        key = {\n          type: Protocol.IndexedDB.KeyType.Number,\n          number: idbKey,\n        };\n        break;\n      case 'string':\n        key = {\n          type: Protocol.IndexedDB.KeyType.String,\n          string: idbKey,\n        };\n        break;\n      case 'object':\n        if (idbKey instanceof Date) {\n          key = {\n            type: Protocol.IndexedDB.KeyType.Date,\n            date: idbKey.getTime(),\n          };\n        } else if (Array.isArray(idbKey)) {\n          const array = [];\n          for (let i = 0; i < idbKey.length; ++i) {\n            const nestedKey = IndexedDBModel.keyFromIDBKey(idbKey[i]);\n            if (nestedKey) {\n              array.push(nestedKey);\n            }\n          }\n          key = {\n            type: Protocol.IndexedDB.KeyType.Array,\n            array,\n          };\n        } else {\n          return undefined;\n        }\n        break;\n      default:\n        return undefined;\n    }\n    return key;\n  }\n\n  private static keyRangeFromIDBKeyRange(idbKeyRange: IDBKeyRange): Protocol.IndexedDB.KeyRange {\n    return {\n      lower: IndexedDBModel.keyFromIDBKey(idbKeyRange.lower),\n      upper: IndexedDBModel.keyFromIDBKey(idbKeyRange.upper),\n      lowerOpen: Boolean(idbKeyRange.lowerOpen),\n      upperOpen: Boolean(idbKeyRange.upperOpen),\n    };\n  }\n\n  static idbKeyPathFromKeyPath(keyPath: Protocol.IndexedDB.KeyPath): string|string[]|null|undefined {\n    let idbKeyPath;\n    switch (keyPath.type) {\n      case Protocol.IndexedDB.KeyPathType.Null:\n        idbKeyPath = null;\n        break;\n      case Protocol.IndexedDB.KeyPathType.String:\n        idbKeyPath = keyPath.string;\n        break;\n      case Protocol.IndexedDB.KeyPathType.Array:\n        idbKeyPath = keyPath.array;\n        break;\n    }\n    return idbKeyPath;\n  }\n\n  static keyPathStringFromIDBKeyPath(idbKeyPath: string|string[]|null|undefined): string|null {\n    if (typeof idbKeyPath === 'string') {\n      return '\"' + idbKeyPath + '\"';\n    }\n    if (idbKeyPath instanceof Array) {\n      return '[\"' + idbKeyPath.join('\", \"') + '\"]';\n    }\n    return null;\n  }\n\n  enable(): void {\n    if (this.enabled) {\n      return;\n    }\n\n    void this.indexedDBAgent.invoke_enable();\n    if (this.securityOriginManager) {\n      this.securityOriginManager.addEventListener(\n          SDK.SecurityOriginManager.Events.SecurityOriginAdded, this.securityOriginAdded, this);\n      this.securityOriginManager.addEventListener(\n          SDK.SecurityOriginManager.Events.SecurityOriginRemoved, this.securityOriginRemoved, this);\n\n      for (const securityOrigin of this.securityOriginManager.securityOrigins()) {\n        this.addOrigin(securityOrigin);\n      }\n    }\n\n    if (this.storageKeyManager) {\n      this.storageKeyManager.addEventListener(SDK.StorageKeyManager.Events.StorageKeyAdded, this.storageKeyAdded, this);\n      this.storageKeyManager.addEventListener(\n          SDK.StorageKeyManager.Events.StorageKeyRemoved, this.storageKeyRemoved, this);\n      for (const storageKey of this.storageKeyManager.storageKeys()) {\n        this.addStorageKey(storageKey);\n      }\n    }\n\n    this.enabled = true;\n  }\n\n  clearForOrigin(origin: string): void {\n    if (!this.enabled || !this.databaseNamesBySecurityOrigin.has(origin)) {\n      return;\n    }\n\n    this.removeOrigin(origin);\n    this.addOrigin(origin);\n  }\n\n  clearForStorageKey(storageKey: string): void {\n    if (!this.enabled || !this.databaseNamesByStorageKey.has(storageKey)) {\n      return;\n    }\n\n    this.removeStorageKey(storageKey);\n    this.addStorageKey(storageKey);\n  }\n\n  async deleteDatabase(databaseId: DatabaseId): Promise<void> {\n    if (!this.enabled) {\n      return;\n    }\n    // TODO(crbug.com/1347831) Prioritize storageKey once everything is ready\n    if (databaseId.securityOrigin) {\n      await this.indexedDBAgent.invoke_deleteDatabase(\n          {securityOrigin: databaseId.securityOrigin, databaseName: databaseId.name});\n      void this.loadDatabaseNames(databaseId.securityOrigin);\n    } else if (databaseId.storageKey) {\n      await this.indexedDBAgent.invoke_deleteDatabase(\n          {storageKey: databaseId.storageKey, databaseName: databaseId.name});\n      void this.loadDatabaseNamesByStorageKey(databaseId.storageKey);\n    }\n  }\n\n  async refreshDatabaseNames(): Promise<void> {\n    for (const securityOrigin of this.databaseNamesBySecurityOrigin.keys()) {\n      await this.loadDatabaseNames(securityOrigin);\n    }\n    for (const storageKey of this.databaseNamesByStorageKey.keys()) {\n      await this.loadDatabaseNamesByStorageKey(storageKey);\n    }\n    this.dispatchEventToListeners(Events.DatabaseNamesRefreshed);\n  }\n\n  refreshDatabase(databaseId: DatabaseId): void {\n    void this.loadDatabase(databaseId, true);\n  }\n\n  async clearObjectStore(databaseId: DatabaseId, objectStoreName: string): Promise<void> {\n    // TODO(crbug.com/1347831) Prioritize storageKey once everything is ready\n    if (databaseId.securityOrigin) {\n      await this.indexedDBAgent.invoke_clearObjectStore(\n          {securityOrigin: databaseId.securityOrigin, databaseName: databaseId.name, objectStoreName});\n    } else if (databaseId.storageKey) {\n      await this.indexedDBAgent.invoke_clearObjectStore(\n          {storageKey: databaseId.storageKey, databaseName: databaseId.name, objectStoreName});\n    }\n  }\n\n  async deleteEntries(databaseId: DatabaseId, objectStoreName: string, idbKeyRange: IDBKeyRange): Promise<void> {\n    const keyRange = IndexedDBModel.keyRangeFromIDBKeyRange(idbKeyRange);\n    // TODO(crbug.com/1347831) Prioritize storageKey once everything is ready\n    if (databaseId.securityOrigin) {\n      await this.indexedDBAgent.invoke_deleteObjectStoreEntries(\n          {securityOrigin: databaseId.securityOrigin, databaseName: databaseId.name, objectStoreName, keyRange});\n    } else if (databaseId.storageKey) {\n      await this.indexedDBAgent.invoke_deleteObjectStoreEntries(\n          {storageKey: databaseId.storageKey, databaseName: databaseId.name, objectStoreName, keyRange});\n    }\n  }\n\n  private securityOriginAdded(event: Common.EventTarget.EventTargetEvent<string>): void {\n    this.addOrigin(event.data);\n  }\n\n  private storageKeyAdded(event: Common.EventTarget.EventTargetEvent<string>): void {\n    this.addStorageKey(event.data);\n  }\n\n  private securityOriginRemoved(event: Common.EventTarget.EventTargetEvent<string>): void {\n    this.removeOrigin(event.data);\n  }\n\n  private storageKeyRemoved(event: Common.EventTarget.EventTargetEvent<string>): void {\n    this.removeStorageKey(event.data);\n  }\n\n  private addOrigin(securityOrigin: string): void {\n    console.assert(!this.databaseNamesBySecurityOrigin.has(securityOrigin));\n    this.databaseNamesBySecurityOrigin.set(securityOrigin, new Set());\n    void this.loadDatabaseNames(securityOrigin);\n    if (this.isValidSecurityOrigin(securityOrigin)) {\n      void this.storageAgent.invoke_trackIndexedDBForOrigin({origin: securityOrigin});\n    }\n  }\n\n  private addStorageKey(storageKey: string): void {\n    console.assert(!this.databaseNamesByStorageKey.has(storageKey));\n    this.databaseNamesByStorageKey.set(storageKey, new Set());\n    void this.loadDatabaseNamesByStorageKey(storageKey);\n    void this.storageAgent.invoke_trackIndexedDBForStorageKey({storageKey});\n  }\n\n  private removeOrigin(securityOrigin: string): void {\n    console.assert(this.databaseNamesBySecurityOrigin.has(securityOrigin));\n    for (const item of this.databaseNamesBySecurityOrigin.get(securityOrigin) || []) {\n      this.databaseRemoved(securityOrigin, item);\n    }\n    this.databaseNamesBySecurityOrigin.delete(securityOrigin);\n    if (this.isValidSecurityOrigin(securityOrigin)) {\n      void this.storageAgent.invoke_untrackIndexedDBForOrigin({origin: securityOrigin});\n    }\n  }\n\n  private removeStorageKey(storageKey: string): void {\n    console.assert(this.databaseNamesByStorageKey.has(storageKey));\n    for (const name of this.databaseNamesByStorageKey.get(storageKey) || []) {\n      this.databaseRemovedForStorageKey(storageKey, name);\n    }\n    this.databaseNamesByStorageKey.delete(storageKey);\n    void this.storageAgent.invoke_untrackIndexedDBForStorageKey({storageKey});\n  }\n\n  private isValidSecurityOrigin(securityOrigin: string): boolean {\n    const parsedURL = Common.ParsedURL.ParsedURL.fromString(securityOrigin);\n    return parsedURL !== null && parsedURL.scheme.startsWith('http');\n  }\n\n  private updateOriginDatabaseNames(securityOrigin: string, databaseNames: string[]): void {\n    const newDatabaseNames = new Set<string>(databaseNames);\n    const oldDatabaseNames = new Set<string>(this.databaseNamesBySecurityOrigin.get(securityOrigin));\n\n    this.databaseNamesBySecurityOrigin.set(securityOrigin, newDatabaseNames);\n\n    for (const databaseName of oldDatabaseNames) {\n      if (!newDatabaseNames.has(databaseName)) {\n        this.databaseRemoved(securityOrigin, databaseName);\n      }\n    }\n    for (const databaseName of newDatabaseNames) {\n      if (!oldDatabaseNames.has(databaseName)) {\n        this.databaseAdded(securityOrigin, databaseName);\n      }\n    }\n  }\n\n  private updateStorageKeyDatabaseNames(storageKey: string, databaseNames: string[]): void {\n    const newDatabaseNames = new Set(databaseNames);\n    const oldDatabaseNames = new Set(this.databaseNamesByStorageKey.get(storageKey));\n\n    this.databaseNamesByStorageKey.set(storageKey, newDatabaseNames);\n\n    for (const databaseName of oldDatabaseNames) {\n      if (!newDatabaseNames.has(databaseName)) {\n        this.databaseRemovedForStorageKey(storageKey, databaseName);\n      }\n    }\n    for (const databaseName of newDatabaseNames) {\n      if (!oldDatabaseNames.has(databaseName) && !this.hasDuplicateWithSecurityOrigin(storageKey, databaseName)) {\n        this.databaseAddedForStorageKey(storageKey, databaseName);\n      }\n    }\n  }\n\n  // TODO(crbug.com/1360001) Remove deduplication once we stop supporting security origin\n  hasDuplicateWithSecurityOrigin(storageKey: string, databaseName: string): boolean {\n    const securityOrigin = storageKey.slice(0, -1);\n    const databaseNames = this.databaseNamesBySecurityOrigin.get(securityOrigin);\n    return Boolean(databaseNames?.has(databaseName));\n  }\n\n  databases(): DatabaseId[] {\n    const result = [];\n    for (const [securityOrigin, databaseNames] of this.databaseNamesBySecurityOrigin) {\n      for (const databaseName of databaseNames) {\n        result.push(new DatabaseId(securityOrigin, undefined, databaseName));\n      }\n    }\n    for (const [storageKey, databaseNames] of this.databaseNamesByStorageKey) {\n      for (const name of databaseNames) {\n        result.push(new DatabaseId(undefined, storageKey, name));\n      }\n    }\n    return result;\n  }\n\n  private databaseAdded(securityOrigin: string, databaseName: string): void {\n    const databaseId = new DatabaseId(securityOrigin, undefined, databaseName);\n    this.dispatchEventToListeners(Events.DatabaseAdded, {model: this, databaseId: databaseId});\n  }\n\n  private databaseAddedForStorageKey(storageKey: string, databaseName: string): void {\n    const databaseId = new DatabaseId(undefined, storageKey, databaseName);\n    this.dispatchEventToListeners(Events.DatabaseAdded, {model: this, databaseId: databaseId});\n  }\n\n  private databaseRemoved(securityOrigin: string, databaseName: string): void {\n    const databaseId = new DatabaseId(securityOrigin, undefined, databaseName);\n    this.dispatchEventToListeners(Events.DatabaseRemoved, {model: this, databaseId: databaseId});\n  }\n\n  private databaseRemovedForStorageKey(storageKey: string, databaseName: string): void {\n    const databaseId = new DatabaseId(undefined, storageKey, databaseName);\n    this.dispatchEventToListeners(Events.DatabaseRemoved, {model: this, databaseId: databaseId});\n  }\n\n  private async loadDatabaseNames(securityOrigin: string): Promise<string[]> {\n    const {databaseNames} = await this.indexedDBAgent.invoke_requestDatabaseNames({securityOrigin});\n    if (!databaseNames) {\n      return [];\n    }\n    if (!this.databaseNamesBySecurityOrigin.has(securityOrigin)) {\n      return [];\n    }\n    this.updateOriginDatabaseNames(securityOrigin, databaseNames);\n    return databaseNames;\n  }\n\n  private async loadDatabaseNamesByStorageKey(storageKey: string): Promise<string[]> {\n    const {databaseNames} = await this.indexedDBAgent.invoke_requestDatabaseNames({storageKey});\n    if (!databaseNames) {\n      return [];\n    }\n    if (!this.databaseNamesByStorageKey.has(storageKey)) {\n      return [];\n    }\n    this.updateStorageKeyDatabaseNames(storageKey, databaseNames);\n    return databaseNames;\n  }\n\n  private async loadDatabase(databaseId: DatabaseId, entriesUpdated: boolean): Promise<void> {\n    let databaseWithObjectStores: Protocol.IndexedDB.DatabaseWithObjectStores|null = null;\n    // TODO(crbug.com/1347831) Prioritize storageKey once everything is ready\n    if (databaseId.securityOrigin) {\n      databaseWithObjectStores = (await this.indexedDBAgent.invoke_requestDatabase({\n                                   securityOrigin: databaseId.securityOrigin,\n                                   databaseName: databaseId.name,\n                                 })).databaseWithObjectStores;\n      if (!this.databaseNamesBySecurityOrigin.has(databaseId.securityOrigin)) {\n        return;\n      }\n    } else if (databaseId.storageKey) {\n      databaseWithObjectStores = (await this.indexedDBAgent.invoke_requestDatabase({\n                                   storageKey: databaseId.storageKey,\n                                   databaseName: databaseId.name,\n                                 })).databaseWithObjectStores;\n      if (!this.databaseNamesByStorageKey.has(databaseId.storageKey)) {\n        return;\n      }\n    }\n    if (!databaseWithObjectStores) {\n      return;\n    }\n\n    const databaseModel = new Database(databaseId, databaseWithObjectStores.version);\n    this.databasesInternal.set(databaseId, databaseModel);\n    for (const objectStore of databaseWithObjectStores.objectStores) {\n      const objectStoreIDBKeyPath = IndexedDBModel.idbKeyPathFromKeyPath(objectStore.keyPath);\n      const objectStoreModel = new ObjectStore(objectStore.name, objectStoreIDBKeyPath, objectStore.autoIncrement);\n      for (let j = 0; j < objectStore.indexes.length; ++j) {\n        const index = objectStore.indexes[j];\n        const indexIDBKeyPath = IndexedDBModel.idbKeyPathFromKeyPath(index.keyPath);\n        const indexModel = new Index(index.name, indexIDBKeyPath, index.unique, index.multiEntry);\n        objectStoreModel.indexes.set(indexModel.name, indexModel);\n      }\n      databaseModel.objectStores.set(objectStoreModel.name, objectStoreModel);\n    }\n\n    this.dispatchEventToListeners(\n        Events.DatabaseLoaded, {model: this, database: databaseModel, entriesUpdated: entriesUpdated});\n  }\n\n  loadObjectStoreData(\n      databaseId: DatabaseId, objectStoreName: string, idbKeyRange: IDBKeyRange|null, skipCount: number,\n      pageSize: number, callback: (arg0: Array<Entry>, arg1: boolean) => void): void {\n    void this.requestData(databaseId, databaseId.name, objectStoreName, '', idbKeyRange, skipCount, pageSize, callback);\n  }\n\n  loadIndexData(\n      databaseId: DatabaseId, objectStoreName: string, indexName: string, idbKeyRange: IDBKeyRange|null,\n      skipCount: number, pageSize: number, callback: (arg0: Array<Entry>, arg1: boolean) => void): void {\n    void this.requestData(\n        databaseId, databaseId.name, objectStoreName, indexName, idbKeyRange, skipCount, pageSize, callback);\n  }\n\n  private async requestData(\n      databaseId: DatabaseId, databaseName: string, objectStoreName: string, indexName: string,\n      idbKeyRange: IDBKeyRange|null, skipCount: number, pageSize: number,\n      callback: (arg0: Array<Entry>, arg1: boolean) => void): Promise<void> {\n    const keyRange = idbKeyRange ? IndexedDBModel.keyRangeFromIDBKeyRange(idbKeyRange) : undefined;\n    const runtimeModel = this.target().model(SDK.RuntimeModel.RuntimeModel);\n    let response: Protocol.IndexedDB.RequestDataResponse|null = null;\n\n    // TODO(crbug.com/1347831) Prioritize storageKey once everything is ready\n    if (databaseId.securityOrigin) {\n      response = await this.indexedDBAgent.invoke_requestData({\n        securityOrigin: databaseId.securityOrigin,\n        databaseName,\n        objectStoreName,\n        indexName,\n        skipCount,\n        pageSize,\n        keyRange,\n      });\n      if (!runtimeModel || !this.databaseNamesBySecurityOrigin.has(databaseId.securityOrigin)) {\n        return;\n      }\n    } else if (databaseId.storageKey) {\n      response = await this.indexedDBAgent.invoke_requestData({\n        storageKey: databaseId.storageKey,\n        databaseName,\n        objectStoreName,\n        indexName,\n        skipCount,\n        pageSize,\n        keyRange,\n      });\n      if (!runtimeModel || !this.databaseNamesByStorageKey.has(databaseId.storageKey)) {\n        return;\n      }\n    }\n    if (!response) {\n      return;\n    }\n    if (response.getError()) {\n      console.error('IndexedDBAgent error: ' + response.getError());\n      return;\n    }\n\n    const dataEntries = response.objectStoreDataEntries;\n    const entries = [];\n    for (const dataEntry of dataEntries) {\n      const key = runtimeModel?.createRemoteObject(dataEntry.key);\n      const primaryKey = runtimeModel?.createRemoteObject(dataEntry.primaryKey);\n      const value = runtimeModel?.createRemoteObject(dataEntry.value);\n      if (!key || !primaryKey || !value) {\n        return;\n      }\n      entries.push(new Entry(key, primaryKey, value));\n    }\n    callback(entries, response.hasMore);\n  }\n\n  async getMetadata(databaseId: DatabaseId, objectStore: ObjectStore): Promise<ObjectStoreMetadata|null> {\n    const databaseName = databaseId.name;\n    const objectStoreName = objectStore.name;\n    let response: Protocol.IndexedDB.GetMetadataResponse|null = null;\n    // TODO(crbug.com/1347831) Prioritize storageKey once everything is ready\n    if (databaseId.securityOrigin) {\n      response = await this.indexedDBAgent.invoke_getMetadata(\n          {securityOrigin: databaseId.securityOrigin, databaseName, objectStoreName});\n    } else if (databaseId.storageKey) {\n      await this.indexedDBAgent.invoke_getMetadata({storageKey: databaseId.storageKey, databaseName, objectStoreName});\n    }\n\n    if (!response) {\n      return null;\n    }\n    if (response.getError()) {\n      console.error('IndexedDBAgent error: ' + response.getError());\n      return null;\n    }\n    return {entriesCount: response.entriesCount, keyGeneratorValue: response.keyGeneratorValue};\n  }\n\n  private async refreshDatabaseList(securityOrigin: string): Promise<void> {\n    const databaseNames = await this.loadDatabaseNames(securityOrigin);\n    for (const databaseName of databaseNames) {\n      void this.loadDatabase(new DatabaseId(securityOrigin, undefined, databaseName), false);\n    }\n  }\n\n  private async refreshDatabaseListForStorageKey(storageKey: string): Promise<void> {\n    const databaseNames = await this.loadDatabaseNamesByStorageKey(storageKey);\n    for (const databaseName of databaseNames) {\n      void this.loadDatabase(new DatabaseId(undefined, storageKey, databaseName), false);\n    }\n  }\n\n  indexedDBListUpdated({origin: securityOrigin, storageKey: storageKey}: Protocol.Storage.IndexedDBListUpdatedEvent):\n      void {\n    // TODO(crbug.com/1347831) Prioritize storageKey once everything is ready\n    if (securityOrigin) {\n      this.originsUpdated.add(securityOrigin);\n      void this.throttler.schedule(() => {\n        const promises = Array.from(this.originsUpdated, securityOrigin => {\n          void this.refreshDatabaseList(securityOrigin);\n        });\n        this.originsUpdated.clear();\n        return Promise.all(promises);\n      });\n    } else if (storageKey) {\n      this.updatedStorageKeys.add(storageKey);\n      void this.throttler.schedule(() => {\n        const promises = Array.from(this.updatedStorageKeys, storageKey => {\n          void this.refreshDatabaseListForStorageKey(storageKey);\n        });\n        this.updatedStorageKeys.clear();\n        return Promise.all(promises);\n      });\n    }\n  }\n\n  indexedDBContentUpdated({origin: securityOrigin, storageKey, databaseName, objectStoreName}:\n                              Protocol.Storage.IndexedDBContentUpdatedEvent): void {\n    // TODO(crbug.com/1347831) Prioritize storageKey once everything is ready\n    const databaseId = securityOrigin ? new DatabaseId(securityOrigin, undefined, databaseName) :\n                                        new DatabaseId(undefined, storageKey, databaseName);\n    this.dispatchEventToListeners(\n        Events.IndexedDBContentUpdated, {databaseId: databaseId, objectStoreName: objectStoreName, model: this});\n  }\n\n  cacheStorageListUpdated(_event: Protocol.Storage.CacheStorageListUpdatedEvent): void {\n  }\n\n  cacheStorageContentUpdated(_event: Protocol.Storage.CacheStorageContentUpdatedEvent): void {\n  }\n\n  interestGroupAccessed(_event: Protocol.Storage.InterestGroupAccessedEvent): void {\n  }\n}\n\nSDK.SDKModel.SDKModel.register(IndexedDBModel, {capabilities: SDK.Target.Capability.Storage, autostart: false});\n\n// TODO(crbug.com/1167717): Make this a const enum again\n// eslint-disable-next-line rulesdir/const_enum\nexport enum Events {\n  DatabaseAdded = 'DatabaseAdded',\n  DatabaseRemoved = 'DatabaseRemoved',\n  DatabaseLoaded = 'DatabaseLoaded',\n  DatabaseNamesRefreshed = 'DatabaseNamesRefreshed',\n  IndexedDBContentUpdated = 'IndexedDBContentUpdated',\n}\n\nexport type EventTypes = {\n  [Events.DatabaseAdded]: {model: IndexedDBModel, databaseId: DatabaseId},\n  [Events.DatabaseRemoved]: {model: IndexedDBModel, databaseId: DatabaseId},\n  [Events.DatabaseLoaded]: {model: IndexedDBModel, database: Database, entriesUpdated: boolean},\n  [Events.DatabaseNamesRefreshed]: void,\n  [Events.IndexedDBContentUpdated]: {model: IndexedDBModel, databaseId: DatabaseId, objectStoreName: string},\n};\n\nexport class Entry {\n  key: SDK.RemoteObject.RemoteObject;\n  primaryKey: SDK.RemoteObject.RemoteObject;\n  value: SDK.RemoteObject.RemoteObject;\n\n  constructor(\n      key: SDK.RemoteObject.RemoteObject, primaryKey: SDK.RemoteObject.RemoteObject,\n      value: SDK.RemoteObject.RemoteObject) {\n    this.key = key;\n    this.primaryKey = primaryKey;\n    this.value = value;\n  }\n}\n\nexport class DatabaseId {\n  readonly securityOrigin?: string;\n  readonly storageKey?: string;\n  name: string;\n  constructor(securityOrigin: string|undefined, storageKey: string|undefined, name: string) {\n    if (Boolean(securityOrigin) === Boolean(storageKey)) {\n      throw new Error('At least and at most one of security origin or storage key must be defined');\n    }\n    this.securityOrigin = securityOrigin;\n    this.storageKey = securityOrigin ? undefined : storageKey;\n    this.name = name;\n  }\n\n  // cannot be null since constructor checks that either one of security origin or storage key is set\n  getOriginOrStorageKey(): string {\n    return this.securityOrigin ? this.securityOrigin : this.storageKey as string;\n  }\n\n  equals(databaseId: DatabaseId): boolean {\n    return this.name === databaseId.name && this.securityOrigin === databaseId.securityOrigin &&\n        this.storageKey === databaseId.storageKey;\n  }\n}\n\nexport class Database {\n  databaseId: DatabaseId;\n  version: number;\n  objectStores: Map<string, ObjectStore>;\n  constructor(databaseId: DatabaseId, version: number) {\n    this.databaseId = databaseId;\n    this.version = version;\n    this.objectStores = new Map();\n  }\n}\n\nexport class ObjectStore {\n  name: string;\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration)\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  keyPath: any;\n  autoIncrement: boolean;\n  indexes: Map<string, Index>;\n\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration)\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  constructor(name: string, keyPath: any, autoIncrement: boolean) {\n    this.name = name;\n    this.keyPath = keyPath;\n    this.autoIncrement = autoIncrement;\n    this.indexes = new Map();\n  }\n\n  get keyPathString(): string {\n    // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration)\n    // @ts-expect-error\n    return IndexedDBModel.keyPathStringFromIDBKeyPath((this.keyPath as string));\n  }\n}\n\nexport class Index {\n  name: string;\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration)\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  keyPath: any;\n  unique: boolean;\n  multiEntry: boolean;\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration)\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  constructor(name: string, keyPath: any, unique: boolean, multiEntry: boolean) {\n    this.name = name;\n    this.keyPath = keyPath;\n    this.unique = unique;\n    this.multiEntry = multiEntry;\n  }\n\n  get keyPathString(): string {\n    return IndexedDBModel.keyPathStringFromIDBKeyPath((this.keyPath as string)) as string;\n  }\n}\nexport interface ObjectStoreMetadata {\n  entriesCount: number;\n  keyGeneratorValue: number;\n}\n"]}